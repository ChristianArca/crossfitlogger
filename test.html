<html>
<script src="https://cdn.firebase.com/v0/firebase.js"></script>
<script type="text/javascript">
var url = "https://christianarca.firebaseio.com/";
var fb = new Firebase(url);
 
/**
 * Looks up a user id by email address and invokes callback with the id or null if not found
 * @return {Object|null} the object contains the key/value hash for one user
 */
function getUserIdByEmail( emailAddress, callback ) {
   fb.child('emails_to_ids/'+emailAddress).once('value', function(snap) {
       callback( snap.val() );
   });
}
 
/**
 * Creates a new user record and also updates the index
 */
function createNewUser( userRecord ) {
	console.log("In createNewUser");
   var id = fb.child('user').push(userRecord).name();
   console.log(id);
   fb.child('emails_to_ids/'+userRecord.email).set(id);
   return id;
}

function emailToKey(emailAddress) {
   return emailAddress.replace('.', ',');
}

//createNewUser({'name': 'Front Squat'});
getUserIdByEmail("email1", function(callback) {
console.log(callback);
});
</script>
</html>